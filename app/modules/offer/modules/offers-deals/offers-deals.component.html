<div class="gt-float-100 gt-mt-20 od-border-top" *ngIf="deals && deals.length">
    <div class="container">
        <div class="gt-float-100">
            <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="gt-float-100 gt-center gt-justify-content-between popular-offer">
                        <div class="gt-float-left gt-center popular-offer-primary">
                            <h2 class="gt-fs-16 gt-lightblack dcolor-primary"> Offers
                            </h2>
                        </div>
                        <div class="gt-float-right popular-offer-secondary" *ngIf="dealCount > 2">
                            <button type="button"
                                class="gt-btn-primary gt-center gt-wh-btn dark-shadow bg-change-secondary"
                                (click)="showAll()"> show all </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="gt-float-100">
            <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12" *ngFor="let deal of deals">
                    <div class="gt-float-100 gt-pd-24 gt-mt-20 deal-box dark-shadow bg-change" (click)="onClick(deal.dealRefId, deal?.dealStatus?.dealStatus, deal?.callerIsReceiver, deal?.directBuy)">
                        <div class="gt-center gt-justify-content-between deal-title">
                            <h1 class="gt-fs-14 gt-lightblack dcolor-primary"> {{
                                getDealCardHeaderFormattedName(deal) }}</h1>
                            <ng-container *ngIf="isGetIncomming(deal); else outgoingSec">
                                <h2 class="gt-center gt-fs-14">
                                    <img src="assets/images/deal/deal-{{ConvertToLowerCase(deal?.dealStatus?.dealStatus)}}.svg" class="gt-mr-8 da-hand" alt="image"
                                        width="18" height="18" />
                                    <span class="gt-secondary gt-font-poppins">{{titleCase(deal?.dealStatus?.dealStatus)}}</span>
                                </h2>
                            </ng-container>
                            <ng-template #outgoingSec>
                                <h2 class="gt-center gt-fs-14">
                                    <img src="assets/images/deal/deal-outgoing.svg" class="gt-mr-8 da-hand" alt="image"
                                        width="18" height="18" />
                                    <span
                                        class="dc-outgoing gt-font-poppins dcolor-secondary">Outgoing</span>
                                </h2>
                            </ng-template>
                        </div>

                        <div class="gt-center gt-justify-content-between gt-mt-10 deal-user">
                            <div class="gt-vcenter feed-back-cards">
                                <ng-container *ngIf="deal.callerIsReceiver; else callerIsSender">
                                    <div class="image-width gt-center gt-position-relative chat-noimg ">
                                        <img [src]="deal.receiver?.imageUrl" class="hhur image-width"
                                            [alt]="deal.receiver.name"
                                            onError="this.src = 'assets/images/user-default-img/chatu-noimg.svg'"
                                            *ngIf="deal.receiver?.imageUrl else avatarSec" />
                                        <ng-template #avatarSec>
                                            <img [src]="userNoImage" class="gtpi" [alt]="deal.receiver.name" />
                                        </ng-template>
                                    </div>
                                    <div class="gt-ml-8 feed-rating">
                                        <div class="gt-mb-2 user-name-fd">
                                            <h1
                                                class="gt-fs-13 gt-lightblack name-fd dcolor-primary capitalize">
                                                {{ deal.receiver.name }}
                                            </h1>
                                        </div>
                                        <div class="user-name-fd">
                                            <h2 class="gt-fs-11 gt-lightgrayish name-fd dcolor-secondary">
                                                (You)
                                            </h2>
                                        </div>
                                    </div>
                                </ng-container>
                                <ng-template #callerIsSender>
                                    <div class="image-width gt-center gt-position-relative chat-noimg ">
                                        <img [src]="deal.sender?.imageUrl" class="klnh image-width"
                                            [alt]="deal.sender.name"
                                            onError="this.src = 'assets/images/user-default-img/chatu-noimg.svg'"
                                            *ngIf="deal.sender?.imageUrl else avatarSec3" />
                                        <ng-template #avatarSec3>
                                            <img [src]="userNoImage" class="dfgh" [alt]="deal.sender.name" />
                                        </ng-template>
                                    </div>
                                    <div class="gt-ml-8 feed-rating">
                                        <div class="gt-mb-2 user-name-fd">
                                            <h1
                                                class="gt-fs-13 gt-lightblack name-fd dcolor-primary capitalize">
                                                {{ deal.sender.name }}
                                            </h1>
                                        </div>
                                        <div class="user-name-fd">
                                            <h2 class="gt-fs-11 gt-lightgrayish name-fd dcolor-secondary">
                                                (You)
                                            </h2>
                                        </div>
                                    </div>
                                </ng-template>
                            </div>

                            <div class="gt-vcenter feed-back-cards">
                                <ng-container *ngIf="deal.callerIsReceiver; else callerIsSender2">
                                    <div class="gt-mr-8 feed-rating">
                                        <div class="gt-mb-2 user-name-fd">
                                            <h1
                                                class="gt-fs-13 gt-lightblack name-fd dcolor-primary capitalize">
                                                {{ deal.sender.name }}
                                            </h1>
                                        </div>
                                        <div class="user-name-fd">
                                            <h2 class="gt-fs-11 gt-lightgrayish name-fd dcolor-secondary">
                                                (User)
                                            </h2>
                                        </div>
                                    </div>
                                    <div class="image-width gt-center gt-position-relative chat-noimg ">
                                        <img [src]="deal.sender?.imageUrl" class="dert image-width"
                                            [alt]="deal.sender.name"
                                            onError="this.src = 'assets/images/user-default-img/chatu-noimg.svg'"
                                            *ngIf="deal.sender?.imageUrl else avatarSec4" />
                                        <ng-template #avatarSec4>
                                            <img [src]="userNoImage" class="rdef" [alt]="deal.sender.name" />
                                        </ng-template>
                                    </div>
                                </ng-container>
                                <ng-template #callerIsSender2>
                                    <div class="gt-mr-8 feed-rating">
                                        <div class="gt-mb-2 user-name-fd">
                                            <h1
                                                class="gt-fs-13 gt-lightblack name-fd dcolor-primary capitalize">
                                                {{ deal.receiver.name }}
                                            </h1>
                                        </div>
                                        <div class="user-name-fd">
                                            <h2 class="gt-fs-11 gt-lightgrayish name-fd dcolor-secondary">
                                                (User)
                                            </h2>
                                        </div>
                                    </div>
                                    <div class="image-width gt-center gt-position-relative chat-noimg ">
                                        <img [src]="deal.receiver?.imageUrl" class="rtyu image-width"
                                            [alt]="deal.receiver.name"
                                            onError="this.src = 'assets/images/user-default-img/chatu-noimg.svg'"
                                            *ngIf="deal.receiver?.imageUrl else avatarSec2" />
                                        <ng-template #avatarSec2>
                                            <img [src]="userNoImage" class="kiuy" [alt]="deal.receiver.name" />
                                        </ng-template>
                                    </div>
                                </ng-template>
                            </div>
                        </div>

                        <div class="gt-center gt-justify-content-between gt-mt-10 deal-offer">
                            <ng-container *ngIf="deal.callerIsReceiver; else callerIsSender3">
                                <div class="gt-center gt-width-245 deal-offer-secondary">
                                    <img *ngIf="fetchDealReceiverOfferImageTile(deal)[0]"
                                        [src]="fetchDealReceiverOfferImageTile(deal)[1]" class="deal-oimg" alt="image"
                                        onError="this.src = 'assets/images/create-offer/uplaod-default-img.png'" />
                                    <ng-container *ngIf="!fetchDealReceiverOfferImageTile(deal)[0]">
                                        {{ fetchrequestedAmount(deal) }}
                                    </ng-container>
                                </div>
                            </ng-container>
                            <ng-template #callerIsSender3>
                                <div class="gt-center gt-width-245 deal-offer-primary">
                                    <img *ngIf="fetchDealSenderOfferImageTile(deal)[0]"
                                        [src]="fetchDealSenderOfferImageTile(deal)[1]" class="deal-oimg" alt="image"
                                        onError="this.src = 'assets/images/create-offer/uplaod-default-img.png'" />
                                    <ng-container *ngIf="!fetchDealSenderOfferImageTile(deal)[0]">
                                        <div class="deal-price-box">
                                            <img src="assets/images/deal/deal-price.svg"
                                                class="gt-center deal-price-icon" width="45" height="45" alt="image">
                                            <h2 class="gt-center gt-fs-18 gt-white gt-text-medium gt-mt-12">
                                                {{fetchrequestedAmount(deal)}}</h2>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-template>

                            <div class="deal-offer-arrow">
                                <img src="assets/images/home/desire-icon.svg" class="image-arrow" alt="image" width="30"
                                    height="29" />
                            </div>

                            <ng-container *ngIf="deal.callerIsReceiver; else callerIsSender4">
                                <div class="gt-center gt-width-245 deal-offer-primary">
                                    <img *ngIf="fetchDealSenderOfferImageTile(deal)[0]"
                                        [src]="fetchDealSenderOfferImageTile(deal)[1]" class="deal-oimg" alt="image"
                                        onError="this.src = 'assets/images/create-offer/uplaod-default-img.png'" />
                                    <ng-container *ngIf="!fetchDealSenderOfferImageTile(deal)[0]">
                                        <div class="deal-price-box">
                                            <img src="assets/images/deal/deal-price.svg"
                                                class="gt-center deal-price-icon" width="45" height="45" alt="image">
                                            <h2 class="gt-center gt-fs-18 gt-white gt-text-medium gt-mt-12">
                                                {{fetchrequestedAmount(deal)}}</h2>
                                        </div>
                                    </ng-container>
                                </div>
                            </ng-container>
                            <ng-template #callerIsSender4>
                                <div class="gt-center gt-width-245 deal-offer-secondary">
                                    <img *ngIf="fetchDealReceiverOfferImageTile(deal)[0]"
                                        [src]="fetchDealReceiverOfferImageTile(deal)[1]" class="deal-oimg" alt="image"
                                        onError="this.src = 'assets/images/create-offer/uplaod-default-img.png'" />
                                    <ng-container *ngIf="!fetchDealReceiverOfferImageTile(deal)[0]">
                                        {{ fetchrequestedAmount(deal) }}
                                    </ng-container>
                                </div>
                            </ng-template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>